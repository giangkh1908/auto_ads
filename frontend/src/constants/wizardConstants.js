// Constants v√† initial data cho CreateAdsWizard

export const INITIAL_DATA = {
  campaign: {
    id: 1,
    name: "Chi·∫øn d·ªãch m·ªõi",
    status: "PAUSED",
    objective: "", // Kh√¥ng ch·ªçn m·∫∑c ƒë·ªãnh - user ph·∫£i ch·ªçn
    budgetType: "CAMPAIGN",
    facebookPage: null,
    facebookPageId: null,
    facebookPageAvatar: null,
    createdAt: new Date().toISOString(),
    adsets: [
      {
        id: 101,
        _id: null,
        name: "Nh√≥m qu·∫£ng c√°o m·ªõi",
        status: "PAUSED",
        budgetType: "daily",
        budgetAmount: 100000,
        targeting: {
          // ƒê·ªíNG B·ªò H√ìA C·∫§U TR√öC D·ªÆ LI·ªÜU T·∫†I ƒê√ÇY
          geo_locations: {
            countries: ["VN"],
          },
          age_min: 18,
          age_max: 65,
          publisher_platforms: ["facebook"],
          facebook_positions: ["feed", "video_feeds", "marketplace", "search"],
        },
        optimization_goal: "REACH",
        billing_event: "IMPRESSIONS",
        promoted_object: null,
        bid_strategy: "LOWEST_COST_WITHOUT_CAP",
        ads: [
          {
            id: 1001,
            adset_id: null,
            page_id: null,
            name: "Qu·∫£ng c√°o m·ªõi",
            status: "PAUSED",
            media: "text",
            mediaUrl: "",
            primaryText: "Kh√°m ph√° s·∫£n ph·∫©m/d·ªãch v·ª• tuy·ªát v·ªùi c·ªßa ch√∫ng t√¥i!",
            headline: "S·∫£n ph·∫©m/D·ªãch v·ª• ch·∫•t l∆∞·ª£ng cao",
            description:
              "ƒê·ªôi ng≈© chuy√™n nghi·ªáp, kinh nghi·ªám l√¢u nƒÉm trong lƒ©nh v·ª±c.",
            cta: "LEARN_MORE",
            destinationUrl: "https://fchat.vn",
          },
        ],
      },
    ],
  },
  adset: {
    id: 101,
    _id: null,
    name: "Nh√≥m qu·∫£ng c√°o m·ªõi",
    status: "PAUSED",
    budgetType: "daily",
    budgetAmount: 100000,
    targeting: {
      location: "Vi·ªát Nam",
      ageMin: 18,
      ageMax: 65,
      gender: "all",
    },
    optimization_goal: "REACH",
    billing_event: "IMPRESSIONS",
    promoted_object: null,
    bid_strategy: "LOWEST_COST_WITHOUT_CAP",
    ads: [],
  },
  ad: {
    id: 1001,
    adset_id: null,
    page_id: null,
    name: "Qu·∫£ng c√°o m·ªõi",
    status: "PAUSED",
    media: "text",
    mediaUrl: "",
    primaryText: "Kh√°m ph√° s·∫£n ph·∫©m/d·ªãch v·ª• tuy·ªát v·ªùi c·ªßa ch√∫ng t√¥i!",
    headline: "S·∫£n ph·∫©m/D·ªãch v·ª• ch·∫•t l∆∞·ª£ng cao",
    description: "ƒê·ªôi ng≈© chuy√™n nghi·ªáp, kinh nghi·ªám l√¢u nƒÉm trong lƒ©nh v·ª±c.",
    cta: "LEARN_MORE",
    destinationUrl: "https://fchat.vn",
  },
};

export const INITIAL_ADSET_STATE = {
  _id: `temp_adset_${Date.now()}`,
  name: "Nh√≥m qu·∫£ng c√°o m·ªõi",
  billing_event: "IMPRESSIONS",
  optimization_goal: "REACH",
  daily_budget: 50000,
  start_time: new Date().toISOString(),
  end_time: null,
  targeting: {
    geo_locations: {
      countries: ["VN"],
    },
    age_min: 18,
    age_max: 65,
    // Th√™m 2 d√≤ng n√†y ƒë·ªÉ gi·ªõi h·∫°n v·ªã tr√≠ qu·∫£ng c√°o ch·ªâ tr√™n Facebook
    publisher_platforms: ["facebook"],
    facebook_positions: ["feed", "video_feeds", "marketplace", "search"],
  },
  status: "PAUSED",
  campaign_id: null,
  ads: [],
};

export const INITIAL_CAMPAIGN_STATE = {
  id: 1,
  name: "Chi·∫øn d·ªãch m·ªõi",
  status: "PAUSED",
  objective: "", // Kh√¥ng ch·ªçn m·∫∑c ƒë·ªãnh - user ph·∫£i ch·ªçn
  budgetType: "CAMPAIGN",
  facebookPage: null,
  facebookPageId: null,
  facebookPageAvatar: null,
  createdAt: new Date().toISOString(),
  adsets: [
    {
      id: 101,
      _id: null,
      name: "Nh√≥m qu·∫£ng c√°o m·ªõi",
      status: "PAUSED",
      budgetType: "daily",
      budgetAmount: 100000,
      targeting: {
        // ƒê·ªíNG B·ªò H√ìA C·∫§U TR√öC D·ªÆ LI·ªÜU T·∫†I ƒê√ÇY
        geo_locations: {
          countries: ["VN"],
        },
        age_min: 18,
        age_max: 65,
        publisher_platforms: ["facebook"],
        facebook_positions: ["feed", "video_feeds", "marketplace", "search"],
      },
      optimization_goal: "REACH",
      billing_event: "IMPRESSIONS",
      promoted_object: null,
      bid_strategy: "LOWEST_COST_WITHOUT_CAP",
      ads: [
        {
          id: 1001,
          adset_id: null,
          page_id: null,
          name: "Qu·∫£ng c√°o m·ªõi",
          status: "PAUSED",
          media: "text",
          mediaUrl: "",
          primaryText: "Kh√°m ph√° s·∫£n ph·∫©m/d·ªãch v·ª• tuy·ªát v·ªùi c·ªßa ch√∫ng t√¥i!",
          headline: "S·∫£n ph·∫©m/D·ªãch v·ª• ch·∫•t l∆∞·ª£ng cao",
          description:
            "ƒê·ªôi ng≈© chuy√™n nghi·ªáp, kinh nghi·ªám l√¢u nƒÉm trong lƒ©nh v·ª±c.",
          cta: "LEARN_MORE",
          destinationUrl: "https://fchat.vn",
        },
      ],
    },
  ],
};

// Map UI objectives sang API objectives (Meta outcome-based)
// Theo b·∫£ng ODAX Migration t·ª´ Facebook API v23.0+
export const FB_OBJECTIVE_MAP = {
  AWARENESS: "OUTCOME_AWARENESS",
  TRAFFIC: "OUTCOME_TRAFFIC",
  ENGAGEMENT: "OUTCOME_ENGAGEMENT", // POST_ENGAGEMENT, PAGE_LIKES, EVENT_RESPONSES, VIDEO_VIEWS, MESSAGES
  LEADS: "OUTCOME_LEADS",
  SALES: "OUTCOME_SALES",
  APP_PROMOTION: "OUTCOME_APP_PROMOTION",
};

// M·∫∑c ƒë·ªãnh c√°c gi√° tr·ªã optimization_goal v√† billing_event theo t√†i li·ªáu Meta v23.0
export const FB_ADSET_DEFAULTS_BY_OBJECTIVE = {
  OUTCOME_AWARENESS: {
    optimization_goal: "REACH",
    billing_event: "IMPRESSIONS",
    promoted_object: null,
  },
  OUTCOME_TRAFFIC: {
    optimization_goal: "LINK_CLICKS",
    billing_event: "IMPRESSIONS",
    promoted_object: null,
  },
  OUTCOME_ENGAGEMENT: {
    optimization_goal: "POST_ENGAGEMENT",
    billing_event: "IMPRESSIONS",
    promoted_object: { page_id: null },
  },
  OUTCOME_LEADS: {
    optimization_goal: "LEAD_GENERATION",
    billing_event: "IMPRESSIONS",
    promoted_object: { page_id: null }, // c·∫ßn page_id ƒë·ªÉ t·∫°o form lead
  },
  OUTCOME_SALES: {
    optimization_goal: "OFFSITE_CONVERSIONS",
    billing_event: "IMPRESSIONS",
    promoted_object: { pixel_id: null, custom_event_type: "PURCHASE" },
  },
  OUTCOME_APP_PROMOTION: {
    optimization_goal: "APP_INSTALLS",
    billing_event: "IMPRESSIONS",
    promoted_object: {
      application_id: null,
      object_store_url: null,
      custom_event_type: "APP_INSTALLS",
    },
  },
};

// C√°c b∆∞·ªõc Wizard
export const WIZARD_STEPS = {
  TARGET: 0, // ch·ªçn m·ª•c ti√™u
  CAMPAIGN: 1, // th√¥ng tin chi·∫øn d·ªãch
  ADSET: 2, // nh√≥m qu·∫£ng c√°o
  AD: 3, // qu·∫£ng c√°o
  CREATIVE: 4, // xem tr∆∞·ªõc
};

export const EDITING_ITEM_TYPES = {
  CAMPAIGN: "campaign",
  ADSET: "adset",
  AD: "ad",
};

export const TAB_TYPES = {
  CAMPAIGN: "campaign",
  CHILD: "child",
};

// Helper l·∫•y m·∫∑c ƒë·ªãnh AdSet theo m·ª•c ti√™u campaign
export const getAdsetDefaultsByObjective = (uiObjective) => {
  const fbObjective = FB_OBJECTIVE_MAP[uiObjective];
  const defaults = FB_ADSET_DEFAULTS_BY_OBJECTIVE[fbObjective];
  return (
    defaults || {
      optimization_goal: "REACH",
      billing_event: "IMPRESSIONS",
      promoted_object: null,
    }
  );
};

// C·∫•u h√¨nh chi ti·∫øt cho Adset theo t·ª´ng m·ª•c ti√™u chi·∫øn d·ªãch
// Theo b·∫£ng ODAX Migration ch√≠nh th·ª©c t·ª´ Meta v23.0+
export const ADSET_CONFIG_BY_OBJECTIVE = {
  // ODAX: AWARENESS ‚Üí AD_RECALL_LIFT, REACH, IMPRESSIONS, THRUPLAY, TWO_SECOND_CONTINUOUS_VIDEO_VIEWS
  AWARENESS: {
    optimization_goals: [
      { 
        value: "AD_RECALL_LIFT", 
        label: "üß† M·ª©c ƒë·ªô ghi nh·ªõ qu·∫£ng c√°o", 
        description: "üì∏ ·∫¢nh/Video ‚Üí TƒÉng kh·∫£ nƒÉng ghi nh·ªõ th∆∞∆°ng hi·ªáu",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { page_id: null }
      },
      { 
        value: "REACH", 
        label: "üë• Ti·∫øp c·∫≠n", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ƒëa s·ªë ng∆∞·ªùi th·∫•y qu·∫£ng c√°o",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { page_id: null }
      },
      { 
        value: "THRUPLAY", 
        label: "üé¨ L∆∞·ª£t xem video (ThruPlay)", 
        description: "üé• B·∫ÆT BU·ªòC VIDEO ‚Üí T·ªëi ∆∞u ng∆∞·ªùi xem h·∫øt video",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { page_id: null }
      },
      { 
        value: "TWO_SECOND_CONTINUOUS_VIDEO_VIEWS", 
        label: "‚è±Ô∏è Xem video 2s li√™n t·ª•c", 
        description: "üé• B·∫ÆT BU·ªòC VIDEO ‚Üí T·ªëi ∆∞u xem √≠t nh·∫•t 2 gi√¢y",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { page_id: null }
      },
    ],
    billing_events: ["IMPRESSIONS"],
  },
  // ODAX: TRAFFIC ‚Üí LINK_CLICKS, LANDING_PAGE_VIEWS, REACH, IMPRESSIONS
  // Theo b·∫£ng: destination_type kh√¥ng b·∫Øt bu·ªôc, promoted_object: application_id, object_store_url (cho app)
  TRAFFIC: {
    optimization_goals: [
      { 
        value: "LINK_CLICKS", 
        label: "üîó L∆∞·ª£t nh·∫•p li√™n k·∫øt", 
        description: "üì∏ ·∫¢nh/Video ‚Üí TƒÉng traffic ƒë·∫øn website/app",
        billing_events: ["IMPRESSIONS", "LINK_CLICKS"],
        promoted_object: { application_id: null, object_store_url: null }
      },
      { 
        value: "LANDING_PAGE_VIEWS", 
        label: "üìÑ L∆∞·ª£t xem trang ƒë√≠ch", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ∆∞u ng∆∞·ªùi xem landing page",
        billing_events: ["IMPRESSIONS"],
        promoted_object: {}
      },
      { 
        value: "REACH", 
        label: "üë• Ti·∫øp c·∫≠n", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ƒëa s·ªë ng∆∞·ªùi th·∫•y",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { application_id: null, object_store_url: null }
      },
      { 
        value: "REACH", 
        label: "üë• Ti·∫øp c·∫≠n b√†i vi·∫øt", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ƒëa s·ªë ng∆∞·ªùi th·∫•y",
        billing_events: ["IMPRESSIONS"], 
        destination_type: "ON_POST",
        promoted_object: {}
      },
    ],
    billing_events: ["IMPRESSIONS", "LINK_CLICKS"],
  },
  // ODAX: ENGAGEMENT ‚Üí POST_ENGAGEMENT, PAGE_LIKES, EVENT_RESPONSES, THRUPLAY, TWO_SECOND_CONTINUOUS_VIDEO_VIEWS, CONVERSATIONS
  // Theo b·∫£ng ODAX ch√≠nh th·ª©c: OUTCOME_ENGAGEMENT v·ªõi destination_type
  ENGAGEMENT: {
    optimization_goals: [
      // ON_POST: T∆∞∆°ng t√°c v·ªõi b√†i vi·∫øt
      // { 
      //   value: "POST_ENGAGEMENT", 
      //   label: "üí¨ T∆∞∆°ng t√°c b√†i vi·∫øt", 
      //   description: "üì∏ ·∫¢nh/Video ‚Üí TƒÉng like, comment, share",
      //   billing_events: ["IMPRESSIONS"], 
      //   destination_type: "ON_POST",
      //   promoted_object: {}
      // },
      { 
        value: "REACH", 
        label: "üë• Ti·∫øp c·∫≠n", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ƒëa s·ªë ng∆∞·ªùi th·∫•y",
        billing_events: ["IMPRESSIONS"], 
        destination_type: "ON_POST",
        promoted_object: {}
      },
      // { 
      //   value: "IMPRESSIONS", 
      //   label: "üìä S·ªë l·∫ßn hi·ªÉn th·ªã", 
      //   description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ƒëa l∆∞·ª£t hi·ªÉn th·ªã",
      //   billing_events: ["IMPRESSIONS"], 
      //   destination_type: "ON_POST",
      //   promoted_object: {}
      // },
      // ON_PAGE: L∆∞·ª£t th√≠ch trang
      { 
        value: "PAGE_LIKES", 
        label: "üëç L∆∞·ª£t th√≠ch trang", 
        description: "üì∏ ·∫¢nh/Video ‚Üí TƒÉng follower trang Facebook",
        billing_events: ["IMPRESSIONS"], 
        destination_type: "ON_PAGE",
        promoted_object: { page_id: null }
      },
      // ON_EVENT: Ph·∫£n h·ªìi s·ª± ki·ªán
      { 
        value: "EVENT_RESPONSES", 
        label: "üìÖ Ph·∫£n h·ªìi s·ª± ki·ªán", 
        description: "üì∏ ·∫¢nh/Video ‚Üí TƒÉng ng∆∞·ªùi quan t√¢m/tham gia s·ª± ki·ªán",
        billing_events: ["IMPRESSIONS"], 
        destination_type: "ON_EVENT",
        promoted_object: {}
      },
      // { 
      //   value: "POST_ENGAGEMENT", 
      //   label: "üí¨ T∆∞∆°ng t√°c b√†i vi·∫øt (Event)", 
      //   description: "üì∏ ·∫¢nh/Video ‚Üí T∆∞∆°ng t√°c v·ªõi b√†i vi·∫øt s·ª± ki·ªán",
      //   billing_events: ["IMPRESSIONS"], 
      //   destination_type: "ON_EVENT",
      //   promoted_object: {}
      // },
      // { 
      //   value: "REACH", 
      //   label: "üë• Ti·∫øp c·∫≠n s·ª± ki·ªán", 
      //   description: "üì∏ ·∫¢nh/Video ‚Üí Ti·∫øp c·∫≠n ng∆∞·ªùi quan t√¢m s·ª± ki·ªán",
      //   billing_events: ["IMPRESSIONS"], 
      //   destination_type: "ON_EVENT",
      //   promoted_object: {}
      // },
      // ON_VIDEO: L∆∞·ª£t xem video
      // { 
      //   value: "THRUPLAY", 
      //   label: "üé¨ L∆∞·ª£t xem video (ThruPlay)", 
      //   description: "üé• B·∫ÆT BU·ªòC VIDEO ‚Üí T·ªëi ∆∞u ng∆∞·ªùi xem h·∫øt video",
      //   billing_events: ["IMPRESSIONS"], 
      //   destination_type: "ON_VIDEO",
      //   promoted_object: {}
      // },
      // { 
      //   value: "TWO_SECOND_CONTINUOUS_VIDEO_VIEWS", 
      //   label: "‚è±Ô∏è Xem video 2s li√™n t·ª•c", 
      //   description: "üé• B·∫ÆT BU·ªòC VIDEO ‚Üí T·ªëi ∆∞u xem √≠t nh·∫•t 2 gi√¢y",
      //   billing_events: ["IMPRESSIONS"], 
      //   destination_type: "ON_VIDEO",
      //   promoted_object: {}
      // },
      // MESSENGER: Tin nh·∫Øn
      { 
        value: "CONVERSATIONS", 
        label: "üí¨ H·ªôi tho·∫°i (Messenger)", 
        description: "üì∏ ·∫¢nh/Video ‚Üí B·∫Øt ƒë·∫ßu h·ªôi tho·∫°i Messenger",
        billing_events: ["IMPRESSIONS"], 
        destination_type: "MESSENGER",
        promoted_object: { page_id: null }
      },
      { 
        value: "LINK_CLICKS", 
        label: "üîó L∆∞·ª£t nh·∫•p li√™n k·∫øt (Messenger)", 
        description: "üì∏ ·∫¢nh/Video ‚Üí Nh·∫•p v√†o link trong Messenger",
        billing_events: ["IMPRESSIONS"], 
        destination_type: "MESSENGER",
        promoted_object: { page_id: null }
      },
    ],
    billing_events: ["IMPRESSIONS"],
  },
  // ODAX: LEADS ‚Üí LEAD_GENERATION, QUALITY_LEAD, CONVERSATIONS, OFFSITE_CONVERSIONS, etc.
  // Theo b·∫£ng: destination_type ON_AD, promoted_object: page_id, pixel_id, custom_event_type
  LEADS: {
    optimization_goals: [
      // ON_AD: Lead form tr√™n qu·∫£ng c√°o
      { 
        value: "LEAD_GENERATION", 
        label: "üìã Thu th·∫≠p kh√°ch h√†ng ti·ªÅm nƒÉng", 
        description: "üì∏ ·∫¢nh/Video ‚Üí Form lead tr√™n qu·∫£ng c√°o",
        billing_events: ["IMPRESSIONS"],
        destination_type: "ON_AD",
        promoted_object: { page_id: null }
      },
      { 
        value: "QUALITY_LEAD", 
        label: "‚≠ê Kh√°ch h√†ng ti·ªÅm nƒÉng ch·∫•t l∆∞·ª£ng", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ∆∞u lead ch·∫•t l∆∞·ª£ng cao",
        billing_events: ["IMPRESSIONS"],
        destination_type: "ON_AD",
        promoted_object: { page_id: null }
      },
      // Messenger: Lead t·ª´ Messenger
      // { 
      //   value: "LEAD_GENERATION", 
      //   label: "üí¨ Lead t·ª´ Messenger", 
      //   description: "üì∏ ·∫¢nh/Video ‚Üí Thu th·∫≠p lead qua Messenger",
      //   billing_events: ["IMPRESSIONS"],
      //   destination_type: "MESSENGER",
      //   promoted_object: { page_id: null }
      // },
      // Phone Call
      // { 
      //   value: "QUALITY_CALL", 
      //   label: "üìû Cu·ªôc g·ªçi ch·∫•t l∆∞·ª£ng", 
      //   description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ∆∞u s·ªë l∆∞·ª£ng cu·ªôc g·ªçi",
      //   billing_events: ["IMPRESSIONS"],
      //   promoted_object: { page_id: null }
      // },
      // Conversion events (pixel/app)
      { 
        value: "OFFSITE_CONVERSIONS", 
        label: "üîÑ Chuy·ªÉn ƒë·ªïi ngo√†i site", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ∆∞u conversion events",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { pixel_id: null, custom_event_type: null, application_id: null, object_store_url: null }
      //Khi t·ªëi ∆∞u h√≥a cho chuy·ªÉn ƒë·ªïi ngo√†i trang web, b·∫°n c·∫ßn cung c·∫•p ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c qu·∫£ng c√°o c√≥ (a) pixel_id ho·∫∑c (b) c·∫£ application_id v√† event_type  
      },
      { 
        value: "LINK_CLICKS", 
        label: "üîó L∆∞·ª£t nh·∫•p li√™n k·∫øt", 
        description: "üì∏ ·∫¢nh/Video ‚Üí TƒÉng traffic ƒë·∫øn landing page",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { pixel_id: null, custom_event_type: null, application_id: null, object_store_url: null }
      },
      { 
        value: "REACH", 
        label: "üë• Ti·∫øp c·∫≠n", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ƒëa s·ªë ng∆∞·ªùi th·∫•y",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { pixel_id: null, custom_event_type: null, application_id: null, object_store_url: null }
      },
      { 
        value: "LANDING_PAGE_VIEWS", 
        label: "üìÑ L∆∞·ª£t xem trang ƒë√≠ch", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ∆∞u ng∆∞·ªùi xem landing page",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { pixel_id: null, custom_event_type: null }
      },
      
    ],
    billing_events: ["IMPRESSIONS"],
  },
  // ODAX: SALES ‚Üí OFFSITE_CONVERSIONS, LINK_CLICKS, CONVERSATIONS, QUALITY_CALL
  // Theo b·∫£ng: promoted_object: pixel_id, custom_event_type, application_id, page_id (cho messenger/phone)
  SALES: {
    optimization_goals: [
      // WEBSITE: Conversion events
      { 
        value: "OFFSITE_CONVERSIONS", 
        label: "üîÑ Chuy·ªÉn ƒë·ªïi ngo√†i site", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ∆∞u mua h√†ng/conversion",
        billing_events: ["IMPRESSIONS"],
        destination_type: "WEBSITE",
        promoted_object: { pixel_id: null, custom_event_type: "PURCHASE", application_id: null, object_store_url: null }
      },
      // MESSENGER: Conversations
      { 
        value: "CONVERSATIONS", 
        label: "üí¨ H·ªôi tho·∫°i (Messenger)", 
        description: "üì∏ ·∫¢nh/Video ‚Üí B·∫Øt ƒë·∫ßu h·ªôi tho·∫°i mua h√†ng",
        billing_events: ["IMPRESSIONS"],
        destination_type: "MESSENGER",
        promoted_object: { page_id: null, pixel_id: null, custom_event_type: null }
      },
      // Phone Call
      { 
        value: "QUALITY_CALL", 
        label: "üìû Cu·ªôc g·ªçi ch·∫•t l∆∞·ª£ng", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ∆∞u s·ªë l∆∞·ª£ng cu·ªôc g·ªçi",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { page_id: null }
      },
    ],
    billing_events: ["IMPRESSIONS"],
  },
  // ODAX: APP_PROMOTION ‚Üí LINK_CLICKS, OFFSITE_CONVERSIONS, APP_INSTALLS
  // Theo b·∫£ng: promoted_object: application_id, object_store_url
  APP_PROMOTION: {
    optimization_goals: [
      { 
        value: "LINK_CLICKS", 
        label: "üîó L∆∞·ª£t nh·∫•p li√™n k·∫øt", 
        description: "üì∏ ·∫¢nh/Video ‚Üí TƒÉng traffic ƒë·∫øn app store",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { application_id: null, object_store_url: null }
      },
      { 
        value: "OFFSITE_CONVERSIONS", 
        label: "üîÑ Chuy·ªÉn ƒë·ªïi ngo√†i site", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ∆∞u app events",
        billing_events: ["IMPRESSIONS"],
        promoted_object: { application_id: null, object_store_url: null }
      },
      { 
        value: "APP_INSTALLS", 
        label: "üì± L∆∞·ª£t c√†i ƒë·∫∑t ·ª©ng d·ª•ng", 
        description: "üì∏ ·∫¢nh/Video ‚Üí T·ªëi ∆∞u s·ªë l∆∞·ª£t c√†i app",
        billing_events: ["IMPRESSIONS", "APP_INSTALLS"],
        promoted_object: { application_id: null, object_store_url: null }
      },
    ],
    billing_events: ["IMPRESSIONS", "APP_INSTALLS"],
  },
};

// Helpers: l·∫•y danh s√°ch goals v√† billing_events h·ª£p l·ªá theo objective/goal
export const getOptimizationGoals = (uiObjective) => {
  return ADSET_CONFIG_BY_OBJECTIVE[uiObjective]?.optimization_goals || [];
};

export const getCompatibleBillingEvents = (uiObjective, optimizationGoal) => {
  const goals = getOptimizationGoals(uiObjective);
  const goal = goals.find((g) => g.value === optimizationGoal);
  return goal?.billing_events?.length ? goal.billing_events : ["IMPRESSIONS"];
};
